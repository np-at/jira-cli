var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const n=e(require("readline")),t=e(require("./ssl_request")),r=e(require("./config"));exports.default=function(){const e=function(e,n,u,o){!function(e,n,u,o){const i=u&&u.user?u.user:{},s=void 0!==i.enabled&&i.enabled,c=!!i&&i.forMention,f=!n||!c||0===n.indexOf("[~"),l=c&&f?n.slice(2):n;if(!s||!f||!l)return o([]);l&&t.default.get(r.default.auth.url+"rest/api/2/user/search?username="+l).end(((e,t)=>{if(!t.ok)return console.log(t.body.errorMessages.join("\n"));let r=t.body.filter((function(e){return 0===e.name.indexOf(l)}));r=r.map((function(e){return e.name}));const u=r.filter((function(e){return e===l}));r=1===u.length?u:r,c&&(r=r.map((function(e){return"[~"+e+"]"}))),o(r,n)}))}(0,n,u,(function(e,n){o(null,[e,n])}))},u=function(n){return function(t,r){const u=t?t.split(/\s+/):[],o=u.length>0?u[u.length-1]:"";o||r([[],t]),e(0,o,n,r)}};return function(e,t,r){r=r||r;const o=n.default.createInterface({input:process.stdin,output:process.stdout,completer:u(r)});o.question(e,(function(e){o.close(),t(e)}))}};