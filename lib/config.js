var e=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var r={};if(null!=i)for(var o in i)"default"!==o&&Object.prototype.hasOwnProperty.call(i,o)&&e(r,i,o);return t(r,i),r},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const o=r(require("./settings")),u=r(require("strip-json-comments")),n=r(require("./utils")),a=i(require("./initial_config")),l=require("url");let s;const c=o.default.getConfigDirectory(),f=o.default.getConfigFilePath();function d(e,t){return n.default.isFileExists(e)?function(e){const t=JSON.parse(u.default(e)),i={auth:t.auth,authNew:_(t.auth),options:t.options,custom_jql:t.custom_jql,custom_alasql:t.custom_alasql,user_alias:t.user_alias,edit_meta:t.edit_meta,default_create:t.default_create,use_self_signed_certificate:t.use_self_signed_certificate};if(!i.options||!i.options.jira_stop)return void console.error("Ops! Seems like your "+f+" is out of date. Please reset you configuration.");return i}(n.default.loadFromFile(e)):t}function _(e){const{url:t,token:i}=e;if(t){let{host:e,pathname:r,protocol:o}=new l.URL(t);return r=r.endsWith("/")?r.slice(0,r.length-1):r,{host:e+r,protocol:o,token:i}}return e}function p(){return s=d(f,a),h()}function h(){return void 0!==s.auth.url}n.default.createDirectory(c),p(),exports.default={save:function(){n.default.saveToFile(f,JSON.stringify(s,null,2))},load:p,update:function(e,t){s[e]=t},clear:function(){n.default.deleteFile(f),n.default.deleteDirectory(c)},loadInitialFromTemplate:function(e){return s=d(e,a),!0},isLoaded:h,default_create:Object.entries(s.default_create.__always_ask.fields),...s};