var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectProject=exports.fetchIssues=exports.client=exports.getMainTextColWidth=exports.promptForProject=exports.parseProjIssue=void 0;const t=require("jira.js"),r=e(require("../config")),s=e(require("inquirer"));exports.parseProjIssue=e=>{if(!e)return;const t=e.split("-");return{project:t?.shift()??void 0,issueId:t?.join("-")??void 0}};exports.promptForProject=()=>{exports.client};exports.getMainTextColWidth=e=>(process.stdout.columns||200)-e;exports.client=(()=>{if(r.default&&r.default.auth)return new t.Client({host:r.default.auth.url,authentication:{basic:{username:r.default.auth.user,apiToken:Buffer.from(r.default.auth.token,"base64").toString("utf-8").split(":",2)[1]}},baseRequestConfig:{withCredentials:!0}});throw new Error})();exports.fetchIssues=async e=>{try{return await exports.client.issues.getCreateIssueMetadata(void 0)}catch(e){console.error(e)}};exports.selectProject=async()=>{const e=await exports.client.projects.getAllProjects({});s.default.prompt({name:"Choose Project",type:"list",message:"choose one",choices:e})};