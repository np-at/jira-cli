var s=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(exports,"__esModule",{value:!0});const e=s(require("fs")),t=s(require("inquirer")),r=s(require("./config")),a=t.default.createPromptModule();exports.default={answers:{},ask:function(s,e,t){t?a({type:"password",message:s}).then((t=>{t.length>0?e(t):this.ask(s,e,!0)})):a({message:s}).then((function(t){t.length>0?e(t):this.ask(s,e)}))},setup(s){r.default.isLoaded()||this.ask("Jira URL: ",(e=>{this.answers.url=e,this.ask("Username: ",(function(e){this.answers.user=e,this.ask("Password: ",(function(e){this.answers.pass=e,process.stdin.destroy(),this.saveConfig(s)}),!0)}))}))},clearConfig(){a({message:"Are you sure?",default:!1,type:"confirm"}).then((function(s){s&&(r.default.clear(),console.log("Configuration deleted successfully!")),process.stdin.destroy()}))},saveConfig:function(s){if(this.answers.url&&(/\/$/.test(this.answers.url)||(this.answers.url+="/")),this.answers.user&&this.answers.pass){this.answers.token=this.answers.user+":"+this.answers.pass;const t={url:this.answers.url,user:this.answers.user,token:Buffer.from(this.answers.token).toString("base64")};delete this.answers.pass,s.verbose&&console.log(s),s.template&&e.default.existsSync(s.template)&&(console.log("Using cli supplied default config file"),r.default.loadInitialFromTemplate(s.template)),r.default.update("auth",t),r.default.save(),console.log("Information stored!")}}};