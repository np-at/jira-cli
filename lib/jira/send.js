var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("../ssl_request")),r=e(require("../config")),s=e(require("cheerio")),a=e(require("nodemailer")),u=e(require("fs")),o=e(require("underscore"));exports.default={query:null,table:null,send:e=>{t.default.post(r.default.auth.url+"secure/ReleaseNote.jspa").query({projectId:e.projectId}).query({version:e.version}).end(((t,l)=>{if(t)throw new Error(t);const n=s.default.load(l.body)("textarea#editcopy").text(),i=a.default.createTransport({service:"gmail",auth:{user:r.default.auth.user,pass:e.password}}),d=u.default.readFileSync(e.template,"utf8"),c={release_version:e.name,link:r.default.auth.url+"projects/"+e.project_prefix+"/versions/"+e.version,report:n};o.default.templateSettings={interpolate:/\{\{(.+?)\}\}/g};const f=o.default.template(d)(c);(async()=>{const t=await i.sendMail({from:r.default.auth.user,to:e.to,cc:e.cc,subject:e.subject,html:f});console.log("Message sent: %s",t.messageId)})()}))}};