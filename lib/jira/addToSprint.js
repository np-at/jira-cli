var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("../ssl_request")),n=e(require("../config")),r=e(require("./sprint")),i=e(require("./ls")),s=e(require("async")),o=e(require("inquirer")).default.createPromptModule();exports.default=function(){function e(e,t,n,r,i){i=i||{};const s=[];let d=0;if(r&&r.length>0){for(;d<r.length;d++)s.push("("+r[d][0]+") "+r[d][1]);console.log(s.join("\n"))}o({message:e}).then((function(r){r.length>0?t(r):n?t(!1):this.ask(e,t)}))}function d(e,r,i){const s={fields:{}};if(!n.default.edit_meta||!n.default.edit_meta.sprint)return i("sprint field not found");s.fields[n.default.edit_meta.sprint.name]="number"===n.default.edit_meta.sprint.type?Number(e):e,t.default.put(n.default.auth.url+"/rest/api/2/issue/"+r).send(s).end(((t,n)=>n.ok?(console.log("Added ["+r+"] to sprint with id "+e),i()):(console.log("Error getting rapid boards. HTTP Status Code: "+n.status),console.dir(n.body),i())))}return{addIssuesViaKey:function(t,n){var s,o;t.rapidboard||t.sprint?r.default(t.rapidboard,t.sprint,(function(r){e("Please enter the sprint",(function(e){console.log("here"),d(e,t.add,n)}),!1,r)})):t.jql?(s=t.sprintId,o=t.jql,i.default.jqlSearch(o,{},(function(t,n){e("Are you sure you want to add all above issues in sprint id "+s+":",(function(e){console.log(e)}),!0)}))):t.sprintId&&d(t.sprintId,t.add,n)},addAllJqlToSprint:function(t,n){if(!t.jql||!t.sprintId)return n(new Error("jql or sprint id not found"));i.default.jqlSearch(t.jql,{},(function(r,i){e("Are you sure you want to add all above issues in sprint id "+t.sprintId+" [y/N]: ",(function(e){if("y"!==e)return n("no issues were added to sprint");s.default.eachSeries(i,((e,n)=>{d(t.sprintId,e.key,n)}),(()=>n()))}),!0)}))}}};